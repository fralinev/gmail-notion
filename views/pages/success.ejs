<!-- views/success.ejs -->
<!doctype html>
<html>

<head>
    <title>Google SignIn</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <!-- load bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- load fontawesome -->
    <style>
        body {
            padding-top: 70px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="text-primary  text-center"><span class="fa fa-user"></span> Profile Information</h1>
            <div class="row">
                <div class="col-sm-6">
                    <div class="well">
                        <p>
                            <strong>Id</strong>: <%= user.id %><br>
                                <strong>Email</strong>: <%= user.emails[0].value %><br>
                                    <strong>Name</strong>: <%= user.displayName %>
                        </p>
                    </div>
                </div>
            </div>
            <!-- logout button -->
            <div class="row mt-4">
                <div class="col-sm-12 text-center">
                    <a class="btn btn-danger" href="/logout">Logout</a>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-sm-12 text-center">
                    <button class="btn btn-primary" onclick="syncNotion()">Sync</button>
                </div>
            </div>
            <pre id="emails"></pre>
        </div>
    </div>
    <script>
        async function syncNotion() {
            try {
                const response = await fetch("/sync");
                // if (!response.ok) {
                //     throw new Error(`HTTP error! status: ${response.status}`);
                // }
                // const emails = await response.json();

                // const emailList = document.getElementById('emails');
                // emailList.innerHTML = '';

                // emails.forEach(email => {
                //     let listItem = document.createElement('li');
                //     listItem.textContent = email.snippet; // This will display the snippet of the email
                //     emailList.appendChild(listItem);
                // });
            } catch (e) {
                console.log('Error: ', e);
            }
        }
    </script>
</body>

</html>